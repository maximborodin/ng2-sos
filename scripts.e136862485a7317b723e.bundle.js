webpackJsonp([2,4],{331:function(n,e,r){r(603)(r(590))},590:function(n,e){n.exports="/**\r\n * Created by Maxim on 4/17/2017.\r\n */\r\n\r\nif (VK !== undefined) {\r\n  VK.init({\r\n    apiId: 5993950\r\n  });\r\n\r\n\r\n  VK.Auth.login(function(response) {\r\n    if (response.session) {\r\n      /* Пользователь успешно авторизовался */\r\n      console.log('session');\r\n      //alert(response.session.user.id);\r\n      user = response.session.user;\r\n      //var userInfoElement = document.querySelector('.User_info');\r\n      //userInfoElement.innerHTML += user.id + '<br>' + user.first_name + '<br>'\r\n      //  + user.last_name;\r\n      if (response.settings) {\r\n        /* Выбранные настройки доступа пользователя, если они были запрошены */\r\n        console.log('settings');\r\n      }\r\n    } else {\r\n      /* Пользователь нажал кнопку Отмена в окне авторизации */\r\n      console.log('cancel');\r\n    }\r\n  });\r\n}\r\nelse {\r\n  console.log('Unknown VK');\r\n}\r\n\r\nvar coordinatesIP, coordinatesGPS;\r\nymaps.ready(init);\r\n\r\nfunction init() {\r\n  var geolocation = ymaps.geolocation,\r\n    myMap = new ymaps.Map('map', {\r\n      center: [55, 34],\r\n      zoom: 10\r\n    }, {\r\n      searchControlProvider: 'yandex#search'\r\n    });\r\n\r\n  // Сравним положение, вычисленное по ip пользователя и\r\n  // положение, вычисленное средствами браузера.\r\n  geolocation.get({\r\n    provider: 'yandex',\r\n    mapStateAutoApply: true\r\n  }).then(function (result) {\r\n    // Красным цветом пометим положение, вычисленное через ip.\r\n    result.geoObjects.options.set('preset', 'islands#redCircleIcon');\r\n    result.geoObjects.get(0).properties.set({\r\n      balloonContentBody: 'Мое местоположение по IP'\r\n    });\r\n    coordinatesIP = result.geoObjects.get(0).geometry.getCoordinates();\r\n    myMap.geoObjects.add(result.geoObjects);\r\n  });\r\n\r\n  geolocation.get({\r\n    provider: 'browser',\r\n    mapStateAutoApply: true\r\n  }).then(function (result) {\r\n    // Синим цветом пометим положение, полученное через браузер.\r\n    // Если браузер не поддерживает эту функциональность, метка не будет добавлена на карту.\r\n    result.geoObjects.options.set('preset', 'islands#blueCircleIcon');\r\n    result.geoObjects.get(0).properties.set({\r\n      balloonContentBody: 'Мое местоположение по GPS'\r\n    });\r\n    coordinatesGPS = result.geoObjects.get(0).geometry.getCoordinates();\r\n    myMap.geoObjects.add(result.geoObjects);\r\n  });\r\n\r\n  //window.setTimeout(postOnTheWall, 2000);\r\n}\r\n\r\n\r\nfunction postOnTheWall() {\r\n  var coordinates = coordinatesGPS;\r\n  if (coordinates === undefined || typeof coordinates[0] !== \"number\" || typeof coordinates[1] !== \"number\") {\r\n    coordinates = coordinatesIP;\r\n  }\r\n  VK.Api.call('wall.post', {friends_only: 0,\r\n      message:'Я считаю, что я в опасности.' +\r\n      ' В данный момент я нахожусь в указанном месте.',\r\n      lat: coordinates[0],\r\n      long: coordinates[1]},\r\n    function(r) {\r\n      if(r.response) {\r\n        var postedElement = document.querySelector('.Is_posted');\r\n        postedElement.style.visibility = 'visible';\r\n      }\r\n    }\r\n  );\r\n}\r\n"},603:function(n,e){n.exports=function(n){"undefined"!=typeof execScript?execScript(n):eval.call(null,n)}},608:function(n,e,r){n.exports=r(331)}},[608]);